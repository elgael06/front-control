{"ast":null,"code":"import axios from 'axios';\nexport const login = async (username = '', password = '') => {\n  const token = Buffer.from(`${username}:${password}`, 'utf8').toString('base64');\n\n  try {\n    const {\n      data,\n      status\n    } = await axios.post('/api/v1/sesion/login', {\n      email: username\n    }, {\n      headers: {\n        'Authorization': `Basic ${token}`\n      }\n    });\n\n    if (status === 200) {\n      axios.defaults.headers.post['x-access-tokens'] = data.token;\n      axios.defaults.headers.get['x-access-tokens'] = data.token;\n      axios.defaults.headers.put['x-access-tokens'] = data.token;\n      axios.defaults.headers.delete['x-access-tokens'] = data.token;\n    }\n\n    return { ...data,\n      res: status\n    };\n  } catch (error) {\n    return {\n      message: error.toString(),\n      status: false,\n      sesion: null\n    };\n  }\n};\nexport const sendConfirmInfoLogin = async (datos) => {\n  const url = '/api/v1/user/confirm';\n  const error = {\n    messaje: 'Error en la respuesta! ',\n    status: false\n  };\n\n  try {\n    const {\n      data,\n      status\n    } = await axios.post(url, datos);\n    return status === 200 ? { ...data\n    } : error;\n  } catch (err) {\n    error.messaje += err.toString();\n    console.log(err);\n    return error;\n  }\n};","map":{"version":3,"sources":["/home/gael/development/base-back-end/front-control/src/api/login.api.ts"],"names":["axios","login","username","password","token","Buffer","from","toString","data","status","post","email","headers","defaults","get","put","delete","res","error","message","sesion","sendConfirmInfoLogin","datos","url","messaje","err","console","log"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,KAAK,GAAG,OAAOC,QAAQ,GAAG,EAAlB,EAAsBC,QAAQ,GAAG,EAAjC,KAAwC;AACzD,QAAMC,KAAK,GAAGC,MAAM,CAACC,IAAP,CAAa,GAAEJ,QAAS,IAAGC,QAAS,EAApC,EAAuC,MAAvC,EAA+CI,QAA/C,CAAwD,QAAxD,CAAd;;AACA,MAAI;AACA,UAAM;AAAEC,MAAAA,IAAF;AAAOC,MAAAA;AAAP,QAAkB,MAAMT,KAAK,CAACU,IAAN,CAAW,sBAAX,EAC1B;AAAEC,MAAAA,KAAK,EAAET;AAAT,KAD0B,EACL;AACrBU,MAAAA,OAAO,EAAE;AACL,yBAAkB,SAAQR,KAAM;AAD3B;AADY,KADK,CAA9B;;AAMA,QAAIK,MAAM,KAAK,GAAf,EAAoB;AAChBT,MAAAA,KAAK,CAACa,QAAN,CAAeD,OAAf,CAAuBF,IAAvB,CAA4B,iBAA5B,IAAiDF,IAAI,CAACJ,KAAtD;AACAJ,MAAAA,KAAK,CAACa,QAAN,CAAeD,OAAf,CAAuBE,GAAvB,CAA2B,iBAA3B,IAAgDN,IAAI,CAACJ,KAArD;AACAJ,MAAAA,KAAK,CAACa,QAAN,CAAeD,OAAf,CAAuBG,GAAvB,CAA2B,iBAA3B,IAAgDP,IAAI,CAACJ,KAArD;AACAJ,MAAAA,KAAK,CAACa,QAAN,CAAeD,OAAf,CAAuBI,MAAvB,CAA8B,iBAA9B,IAAmDR,IAAI,CAACJ,KAAxD;AACH;;AACD,WAAO,EAAC,GAAGI,IAAJ;AAASS,MAAAA,GAAG,EAACR;AAAb,KAAP;AACH,GAdD,CAcE,OAAMS,KAAN,EAAY;AACV,WAAO;AACHC,MAAAA,OAAO,EAAED,KAAK,CAACX,QAAN,EADN;AAEHE,MAAAA,MAAM,EAAE,KAFL;AAGHW,MAAAA,MAAM,EAAC;AAHJ,KAAP;AAKH;AACJ,CAvBM;AAyBP,OAAO,MAAMC,oBAAoB,GAAG,OAAOC,KAAP,KAM9B;AAEF,QAAMC,GAAG,GAAG,sBAAZ;AACA,QAAML,KAAK,GAAG;AAAEM,IAAAA,OAAO,EAAE,yBAAX;AAAsCf,IAAAA,MAAM,EAAE;AAA9C,GAAd;;AACA,MAAI;AACA,UAAM;AAAED,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAmB,MAAMT,KAAK,CAACU,IAAN,CAAWa,GAAX,EAAgBD,KAAhB,CAA/B;AACA,WAAOb,MAAM,KAAK,GAAX,GAAiB,EAAE,GAAGD;AAAL,KAAjB,GAA+BU,KAAtC;AACH,GAHD,CAGE,OAAOO,GAAP,EAAY;AACVP,IAAAA,KAAK,CAACM,OAAN,IAAiBC,GAAG,CAAClB,QAAJ,EAAjB;AACAmB,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,WAAOP,KAAP;AACH;AACJ,CAlBM","sourcesContent":["import axios from 'axios';\n\nexport const login = async (username = '', password = '') => {\n    const token = Buffer.from(`${username}:${password}`, 'utf8').toString('base64');\n    try {\n        const { data,status } = await axios.post('/api/v1/sesion/login',\n            { email: username }, {\n            headers: {\n                'Authorization': `Basic ${token}`\n            },\n        });\n        if (status === 200) {            \n            axios.defaults.headers.post['x-access-tokens'] = data.token;\n            axios.defaults.headers.get['x-access-tokens'] = data.token;\n            axios.defaults.headers.put['x-access-tokens'] = data.token;\n            axios.defaults.headers.delete['x-access-tokens'] = data.token;\n        }\n        return {...data,res:status};\n    } catch(error){\n        return {\n            message: error.toString(),\n            status: false,\n            sesion:null\n        }\n    }\n}\n\nexport const sendConfirmInfoLogin = async (datos: {\n    email: string,\n    phone: string,\n    date: string,\n    password: string,\n    nPassword:string\n}) => {\n    \n    const url = '/api/v1/user/confirm';\n    const error = { messaje: 'Error en la respuesta! ', status: false };\n    try {\n        const { data, status } = await axios.post(url, datos);\n        return status === 200 ? { ...data } : error;\n    } catch (err) {\n        error.messaje += err.toString();\n        console.log(err);\n        return error;\n    }\n}"]},"metadata":{},"sourceType":"module"}