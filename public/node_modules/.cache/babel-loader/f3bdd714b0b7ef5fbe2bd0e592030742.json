{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar EncodeHintType_1 = require(\"../core/EncodeHintType\");\n\nvar Encoder_1 = require(\"../core/qrcode/encoder/Encoder\");\n\nvar ErrorCorrectionLevel_1 = require(\"../core/qrcode/decoder/ErrorCorrectionLevel\");\n\nvar IllegalArgumentException_1 = require(\"../core/IllegalArgumentException\");\n\nvar IllegalStateException_1 = require(\"../core/IllegalStateException\");\n/**\n * @deprecated Moving to @zxing/browser\n */\n\n\nvar BrowserQRCodeSvgWriter =\n/** @class */\nfunction () {\n  function BrowserQRCodeSvgWriter() {}\n  /**\n   * Writes and renders a QRCode SVG element.\n   *\n   * @param contents\n   * @param width\n   * @param height\n   * @param hints\n   */\n\n\n  BrowserQRCodeSvgWriter.prototype.write = function (contents, width, height, hints) {\n    if (hints === void 0) {\n      hints = null;\n    }\n\n    if (contents.length === 0) {\n      throw new IllegalArgumentException_1.default('Found empty contents');\n    } // if (format != BarcodeFormat.QR_CODE) {\n    //   throw new IllegalArgumentException(\"Can only encode QR_CODE, but got \" + format)\n    // }\n\n\n    if (width < 0 || height < 0) {\n      throw new IllegalArgumentException_1.default('Requested dimensions are too small: ' + width + 'x' + height);\n    }\n\n    var errorCorrectionLevel = ErrorCorrectionLevel_1.default.L;\n    var quietZone = BrowserQRCodeSvgWriter.QUIET_ZONE_SIZE;\n\n    if (hints !== null) {\n      if (undefined !== hints.get(EncodeHintType_1.default.ERROR_CORRECTION)) {\n        errorCorrectionLevel = ErrorCorrectionLevel_1.default.fromString(hints.get(EncodeHintType_1.default.ERROR_CORRECTION).toString());\n      }\n\n      if (undefined !== hints.get(EncodeHintType_1.default.MARGIN)) {\n        quietZone = Number.parseInt(hints.get(EncodeHintType_1.default.MARGIN).toString(), 10);\n      }\n    }\n\n    var code = Encoder_1.default.encode(contents, errorCorrectionLevel, hints);\n    return this.renderResult(code, width, height, quietZone);\n  };\n  /**\n   * Renders the result and then appends it to the DOM.\n   */\n\n\n  BrowserQRCodeSvgWriter.prototype.writeToDom = function (containerElement, contents, width, height, hints) {\n    if (hints === void 0) {\n      hints = null;\n    }\n\n    if (typeof containerElement === 'string') {\n      containerElement = document.querySelector(containerElement);\n    }\n\n    var svgElement = this.write(contents, width, height, hints);\n    if (containerElement) containerElement.appendChild(svgElement);\n  };\n  /**\n   * Note that the input matrix uses 0 == white, 1 == black.\n   * The output matrix uses 0 == black, 255 == white (i.e. an 8 bit greyscale bitmap).\n   */\n\n\n  BrowserQRCodeSvgWriter.prototype.renderResult = function (code, width\n  /*int*/\n  , height\n  /*int*/\n  , quietZone\n  /*int*/\n  ) {\n    var input = code.getMatrix();\n\n    if (input === null) {\n      throw new IllegalStateException_1.default();\n    }\n\n    var inputWidth = input.getWidth();\n    var inputHeight = input.getHeight();\n    var qrWidth = inputWidth + quietZone * 2;\n    var qrHeight = inputHeight + quietZone * 2;\n    var outputWidth = Math.max(width, qrWidth);\n    var outputHeight = Math.max(height, qrHeight);\n    var multiple = Math.min(Math.floor(outputWidth / qrWidth), Math.floor(outputHeight / qrHeight)); // Padding includes both the quiet zone and the extra white pixels to accommodate the requested\n    // dimensions. For example, if input is 25x25 the QR will be 33x33 including the quiet zone.\n    // If the requested size is 200x160, the multiple will be 4, for a QR of 132x132. These will\n    // handle all the padding from 100x100 (the actual QR) up to 200x160.\n\n    var leftPadding = Math.floor((outputWidth - inputWidth * multiple) / 2);\n    var topPadding = Math.floor((outputHeight - inputHeight * multiple) / 2);\n    var svgElement = this.createSVGElement(outputWidth, outputHeight);\n\n    for (var inputY = 0, outputY = topPadding; inputY < inputHeight; inputY++, outputY += multiple) {\n      // Write the contents of this row of the barcode\n      for (var inputX = 0, outputX = leftPadding; inputX < inputWidth; inputX++, outputX += multiple) {\n        if (input.get(inputX, inputY) === 1) {\n          var svgRectElement = this.createSvgRectElement(outputX, outputY, multiple, multiple);\n          svgElement.appendChild(svgRectElement);\n        }\n      }\n    }\n\n    return svgElement;\n  };\n  /**\n   * Creates a SVG element.\n   *\n   * @param w SVG's width attribute\n   * @param h SVG's height attribute\n   */\n\n\n  BrowserQRCodeSvgWriter.prototype.createSVGElement = function (w, h) {\n    var svgElement = document.createElementNS(BrowserQRCodeSvgWriter.SVG_NS, 'svg');\n    svgElement.setAttributeNS(null, 'height', w.toString());\n    svgElement.setAttributeNS(null, 'width', h.toString());\n    return svgElement;\n  };\n  /**\n   * Creates a SVG rect element.\n   *\n   * @param x Element's x coordinate\n   * @param y Element's y coordinate\n   * @param w Element's width attribute\n   * @param h Element's height attribute\n   */\n\n\n  BrowserQRCodeSvgWriter.prototype.createSvgRectElement = function (x, y, w, h) {\n    var rect = document.createElementNS(BrowserQRCodeSvgWriter.SVG_NS, 'rect');\n    rect.setAttributeNS(null, 'x', x.toString());\n    rect.setAttributeNS(null, 'y', y.toString());\n    rect.setAttributeNS(null, 'height', w.toString());\n    rect.setAttributeNS(null, 'width', h.toString());\n    rect.setAttributeNS(null, 'fill', '#000000');\n    return rect;\n  };\n\n  BrowserQRCodeSvgWriter.QUIET_ZONE_SIZE = 4;\n  /**\n   * SVG markup NameSpace\n   */\n\n  BrowserQRCodeSvgWriter.SVG_NS = 'http://www.w3.org/2000/svg';\n  return BrowserQRCodeSvgWriter;\n}();\n\nexports.BrowserQRCodeSvgWriter = BrowserQRCodeSvgWriter;","map":{"version":3,"sources":["../../src/browser/BrowserQRCodeSvgWriter.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EncodeHintType_1 = require(\"../core/EncodeHintType\");\nvar Encoder_1 = require(\"../core/qrcode/encoder/Encoder\");\nvar ErrorCorrectionLevel_1 = require(\"../core/qrcode/decoder/ErrorCorrectionLevel\");\nvar IllegalArgumentException_1 = require(\"../core/IllegalArgumentException\");\nvar IllegalStateException_1 = require(\"../core/IllegalStateException\");\n/**\n * @deprecated Moving to @zxing/browser\n */\nvar BrowserQRCodeSvgWriter = /** @class */ (function () {\n    function BrowserQRCodeSvgWriter() {\n    }\n    /**\n     * Writes and renders a QRCode SVG element.\n     *\n     * @param contents\n     * @param width\n     * @param height\n     * @param hints\n     */\n    BrowserQRCodeSvgWriter.prototype.write = function (contents, width, height, hints) {\n        if (hints === void 0) { hints = null; }\n        if (contents.length === 0) {\n            throw new IllegalArgumentException_1.default('Found empty contents');\n        }\n        // if (format != BarcodeFormat.QR_CODE) {\n        //   throw new IllegalArgumentException(\"Can only encode QR_CODE, but got \" + format)\n        // }\n        if (width < 0 || height < 0) {\n            throw new IllegalArgumentException_1.default('Requested dimensions are too small: ' + width + 'x' + height);\n        }\n        var errorCorrectionLevel = ErrorCorrectionLevel_1.default.L;\n        var quietZone = BrowserQRCodeSvgWriter.QUIET_ZONE_SIZE;\n        if (hints !== null) {\n            if (undefined !== hints.get(EncodeHintType_1.default.ERROR_CORRECTION)) {\n                errorCorrectionLevel = ErrorCorrectionLevel_1.default.fromString(hints.get(EncodeHintType_1.default.ERROR_CORRECTION).toString());\n            }\n            if (undefined !== hints.get(EncodeHintType_1.default.MARGIN)) {\n                quietZone = Number.parseInt(hints.get(EncodeHintType_1.default.MARGIN).toString(), 10);\n            }\n        }\n        var code = Encoder_1.default.encode(contents, errorCorrectionLevel, hints);\n        return this.renderResult(code, width, height, quietZone);\n    };\n    /**\n     * Renders the result and then appends it to the DOM.\n     */\n    BrowserQRCodeSvgWriter.prototype.writeToDom = function (containerElement, contents, width, height, hints) {\n        if (hints === void 0) { hints = null; }\n        if (typeof containerElement === 'string') {\n            containerElement = document.querySelector(containerElement);\n        }\n        var svgElement = this.write(contents, width, height, hints);\n        if (containerElement)\n            containerElement.appendChild(svgElement);\n    };\n    /**\n     * Note that the input matrix uses 0 == white, 1 == black.\n     * The output matrix uses 0 == black, 255 == white (i.e. an 8 bit greyscale bitmap).\n     */\n    BrowserQRCodeSvgWriter.prototype.renderResult = function (code, width /*int*/, height /*int*/, quietZone /*int*/) {\n        var input = code.getMatrix();\n        if (input === null) {\n            throw new IllegalStateException_1.default();\n        }\n        var inputWidth = input.getWidth();\n        var inputHeight = input.getHeight();\n        var qrWidth = inputWidth + (quietZone * 2);\n        var qrHeight = inputHeight + (quietZone * 2);\n        var outputWidth = Math.max(width, qrWidth);\n        var outputHeight = Math.max(height, qrHeight);\n        var multiple = Math.min(Math.floor(outputWidth / qrWidth), Math.floor(outputHeight / qrHeight));\n        // Padding includes both the quiet zone and the extra white pixels to accommodate the requested\n        // dimensions. For example, if input is 25x25 the QR will be 33x33 including the quiet zone.\n        // If the requested size is 200x160, the multiple will be 4, for a QR of 132x132. These will\n        // handle all the padding from 100x100 (the actual QR) up to 200x160.\n        var leftPadding = Math.floor((outputWidth - (inputWidth * multiple)) / 2);\n        var topPadding = Math.floor((outputHeight - (inputHeight * multiple)) / 2);\n        var svgElement = this.createSVGElement(outputWidth, outputHeight);\n        for (var inputY = 0, outputY = topPadding; inputY < inputHeight; inputY++, outputY += multiple) {\n            // Write the contents of this row of the barcode\n            for (var inputX = 0, outputX = leftPadding; inputX < inputWidth; inputX++, outputX += multiple) {\n                if (input.get(inputX, inputY) === 1) {\n                    var svgRectElement = this.createSvgRectElement(outputX, outputY, multiple, multiple);\n                    svgElement.appendChild(svgRectElement);\n                }\n            }\n        }\n        return svgElement;\n    };\n    /**\n     * Creates a SVG element.\n     *\n     * @param w SVG's width attribute\n     * @param h SVG's height attribute\n     */\n    BrowserQRCodeSvgWriter.prototype.createSVGElement = function (w, h) {\n        var svgElement = document.createElementNS(BrowserQRCodeSvgWriter.SVG_NS, 'svg');\n        svgElement.setAttributeNS(null, 'height', w.toString());\n        svgElement.setAttributeNS(null, 'width', h.toString());\n        return svgElement;\n    };\n    /**\n     * Creates a SVG rect element.\n     *\n     * @param x Element's x coordinate\n     * @param y Element's y coordinate\n     * @param w Element's width attribute\n     * @param h Element's height attribute\n     */\n    BrowserQRCodeSvgWriter.prototype.createSvgRectElement = function (x, y, w, h) {\n        var rect = document.createElementNS(BrowserQRCodeSvgWriter.SVG_NS, 'rect');\n        rect.setAttributeNS(null, 'x', x.toString());\n        rect.setAttributeNS(null, 'y', y.toString());\n        rect.setAttributeNS(null, 'height', w.toString());\n        rect.setAttributeNS(null, 'width', h.toString());\n        rect.setAttributeNS(null, 'fill', '#000000');\n        return rect;\n    };\n    BrowserQRCodeSvgWriter.QUIET_ZONE_SIZE = 4;\n    /**\n     * SVG markup NameSpace\n     */\n    BrowserQRCodeSvgWriter.SVG_NS = 'http://www.w3.org/2000/svg';\n    return BrowserQRCodeSvgWriter;\n}());\nexports.BrowserQRCodeSvgWriter = BrowserQRCodeSvgWriter;\n//# sourceMappingURL=BrowserQRCodeSvgWriter.js.map"]},"metadata":{},"sourceType":"script"}