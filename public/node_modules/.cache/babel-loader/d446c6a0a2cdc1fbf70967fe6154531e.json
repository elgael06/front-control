{"ast":null,"code":"import _regeneratorRuntime from\"/home/gael/development/base-back-end/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/gael/development/base-back-end/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/gael/development/base-back-end/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';export var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var username,password,token,_yield$axios$post,data,status,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:username=_args.length>0&&_args[0]!==undefined?_args[0]:'';password=_args.length>1&&_args[1]!==undefined?_args[1]:'';token=Buffer.from(\"\".concat(username,\":\").concat(password),'utf8').toString('base64');_context.prev=3;_context.next=6;return axios.post('/api/v1/sesion/login',{email:username},{headers:{'Authorization':\"Basic \".concat(token)}});case 6:_yield$axios$post=_context.sent;data=_yield$axios$post.data;status=_yield$axios$post.status;if(status==200){axios.defaults.headers.post['x-access-tokens']=data.token;axios.defaults.headers.get['x-access-tokens']=data.token;axios.defaults.headers.put['x-access-tokens']=data.token;axios.defaults.headers.delete['x-access-tokens']=data.token;}return _context.abrupt(\"return\",_objectSpread(_objectSpread({},data),{},{res:status}));case 13:_context.prev=13;_context.t0=_context[\"catch\"](3);return _context.abrupt(\"return\",{message:_context.t0.toString(),status:false,sesion:null});case 16:case\"end\":return _context.stop();}}},_callee,null,[[3,13]]);}));return function login(){return _ref.apply(this,arguments);};}();","map":{"version":3,"sources":["/home/gael/development/base-back-end/frontend/src/api/login.ts"],"names":["axios","login","username","password","token","Buffer","from","toString","post","email","headers","data","status","defaults","get","put","delete","res","message","sesion"],"mappings":"weAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAO,IAAMC,CAAAA,KAAK,0FAAG,6MAAOC,QAAP,+CAAkB,EAAlB,CAAsBC,QAAtB,+CAAiC,EAAjC,CACXC,KADW,CACHC,MAAM,CAACC,IAAP,WAAeJ,QAAf,aAA2BC,QAA3B,EAAuC,MAAvC,EAA+CI,QAA/C,CAAwD,QAAxD,CADG,uCAGiBP,CAAAA,KAAK,CAACQ,IAAN,CAAW,sBAAX,CAC1B,CAAEC,KAAK,CAAEP,QAAT,CAD0B,CACL,CACrBQ,OAAO,CAAE,CACL,gCAA0BN,KAA1B,CADK,CADY,CADK,CAHjB,wCAGLO,IAHK,mBAGLA,IAHK,CAGAC,MAHA,mBAGAA,MAHA,CASb,GAAIA,MAAM,EAAI,GAAd,CAAmB,CACfZ,KAAK,CAACa,QAAN,CAAeH,OAAf,CAAuBF,IAAvB,CAA4B,iBAA5B,EAAiDG,IAAI,CAACP,KAAtD,CACAJ,KAAK,CAACa,QAAN,CAAeH,OAAf,CAAuBI,GAAvB,CAA2B,iBAA3B,EAAgDH,IAAI,CAACP,KAArD,CACAJ,KAAK,CAACa,QAAN,CAAeH,OAAf,CAAuBK,GAAvB,CAA2B,iBAA3B,EAAgDJ,IAAI,CAACP,KAArD,CACAJ,KAAK,CAACa,QAAN,CAAeH,OAAf,CAAuBM,MAAvB,CAA8B,iBAA9B,EAAmDL,IAAI,CAACP,KAAxD,CACH,CAdY,+DAeFO,IAfE,MAeGM,GAAG,CAACL,MAfP,8FAiBN,CACHM,OAAO,CAAE,YAAMX,QAAN,EADN,CAEHK,MAAM,CAAE,KAFL,CAGHO,MAAM,CAAC,IAHJ,CAjBM,uEAAH,kBAALlB,CAAAA,KAAK,0CAAX","sourcesContent":["import axios from 'axios';\n\nexport const login = async (username = '', password = '') => {\n    const token = Buffer.from(`${username}:${password}`, 'utf8').toString('base64');\n    try {\n        const { data,status } = await axios.post('/api/v1/sesion/login',\n            { email: username }, {\n            headers: {\n                'Authorization': `Basic ${token}`\n            },\n        });\n        if (status == 200) {            \n            axios.defaults.headers.post['x-access-tokens'] = data.token;\n            axios.defaults.headers.get['x-access-tokens'] = data.token;\n            axios.defaults.headers.put['x-access-tokens'] = data.token;\n            axios.defaults.headers.delete['x-access-tokens'] = data.token;\n        }\n        return {...data,res:status};\n    } catch(error){\n        return {\n            message: error.toString(),\n            status: false,\n            sesion:null\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}